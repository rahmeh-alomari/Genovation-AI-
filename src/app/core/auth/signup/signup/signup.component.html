<div class="login-wrapper">
    <p-toast></p-toast>
    <div class="login-box">
        <h2 class="login-title">Sign Up</h2>
        <p class="login-subtitle">Create a new account</p>
        <form [formGroup]="signupForm" (ngSubmit)="onSignup()" class="login-form">
            <div class="form-group">
                <label>First Name</label>
                <input pInputText type="text" class="form-control" formControlName="firstName"
                    placeholder="First Name" />
                <span class="error-msg"
                    *ngIf="signupForm.get('firstName')?.touched && signupForm.get('firstName')?.invalid">
                    First name is required
                </span>
            </div>
            <div class="form-group">
                <label>Last Name</label>
                <input pInputText type="text" class="form-control" formControlName="lastName" placeholder="Last Name" />
                <span class="error-msg"
                    *ngIf="signupForm.get('lastName')?.touched && signupForm.get('lastName')?.invalid">
                    Last name is required
                </span>
            </div>
            <div class="form-group">
                <label>Role</label>
                <p-dropdown formControlName="role" [options]="roles" optionLabel="label" optionValue="value"
                    placeholder="Select Role" class="w-full"></p-dropdown>
                <span class="error-msg" *ngIf="signupForm.get('role')?.touched && signupForm.get('role')?.invalid">
                    Role is required
                </span>
            </div>
            <div class="form-group">
                <label>Email</label>
                <input pInputText type="email" class="form-control" formControlName="email" placeholder="Email" />
                <span class="error-msg" *ngIf="signupForm.get('email')?.touched && signupForm.get('email')?.invalid">
                    Valid email is required
                </span>
            </div>
            <div class="form-group">
                <label>Password</label>

                <div class="password-wrapper" style="position: relative;">

                    <input pInputText [type]="showPassword ? 'text' : 'password'" class="form-control"
                        formControlName="password" placeholder="Password" />

                    <button type="button" (click)="showPassword = !showPassword" class="toggle-password-btn"
                        style="position: absolute; right: 8px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer;"
                        aria-label="Toggle password visibility">
                        <i [class]="showPassword ? 'pi pi-eye' : 'pi pi-eye-slash'"></i>
                    </button>

                </div>

                <span class="error-msg"
                    *ngIf="signupForm.get('password')?.touched && signupForm.get('password')?.errors">
                    <ng-container *ngIf="signupForm.get('password')?.errors?.['required']">
                        Password is required
                    </ng-container>
                    <ng-container *ngIf="signupForm.get('password')?.errors?.['minlength']">
                        Minimum 6 characters required
                    </ng-container>
                    <ng-container *ngIf="signupForm.get('password')?.errors?.['pattern']">
                        Password must contain at least one letter, one number, and one special character (&#64;$!%*?&)
                    </ng-container>
                </span>
            </div>
            <button type="submit" pButton class="login-button" label="Sign Up" [disabled]="signupForm.invalid"></button>
            <div class="login-footer">
                Already have an account? <a routerLink="/login">Login</a>
            </div>
        </form>
    </div>
</div>